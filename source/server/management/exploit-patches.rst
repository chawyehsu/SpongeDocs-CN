===============
漏洞补丁
===============

在最近的 Sponge 构建（SpongeForge 974+）中，SpongeForge 与 SpongeVanilla 修补了几个客户端到服务端的
漏洞。只要实现检测到有用户在利用漏洞，该用户就会被踢出服务器并附带一句解释为何被踢的消息。如果有启
用，相应的日志消息也会发送到控制台中。更多漏洞补丁会在后续添加。

.. note::
  如果你知道一个我们目前 *还没* 覆盖的漏洞，请告诉我们！你可以通过
  `exploits@spongepowered.org <exploits@spongepowered.org>`_
  联系我们或者在论坛私信工作人员。请 **不要** 将漏洞公开到 IRC，我们的 GitHub
  仓库或者论坛上。这能在我们进行修复之前防止漏洞被滥用。

已在 Sponge 中修复的漏洞
======================================

#. 当客户端可以使用例如 'op' 等指令时产生的告示牌指令漏洞
#. 客户端可以强制服务端使用户重生不可见
#. 客户端可以设置物品堆叠的显示名称并导致其超出字符限制

注意目前不能禁用这些补丁，只有日志记录可以进行配置。

.. warning::
    由于隐形漏洞补丁的判断方法会误判用户在利用漏洞，其在最近的 Sponge 构建中已被禁用。

日志消息控制
===================

漏洞补丁的日志消息可以在 Sponge 的配置文件中进行单独控制。请阅读
:doc:`../getting-started/configuration/sponge-conf` 页面了解更多信息。以下是可选项的简述：

.. code-block:: none

  # 当服务端收到带有超过字符限制的物品堆叠名称的漏洞报文时输出日志
  exploit-itemstack-name-overflow=false

  # 当玩家尝试进行令周围玩家不可见的重生时输出日志
  exploit-respawn-invisibility=false

  # 当服务端收到带有玩家无权使用的指令的告示牌更新的漏洞报文时输出日志
  exploit-sign-command-updates=false

.. tip::
    除了直接编辑配置文件，也可以通过指令控制日志消息。例如，要启用告示牌指令漏洞日志记录，在控制台中输入
    ``sponge config -g logging.exploit-sign-command-updates true`` 即可（如果你是 op 你也可以在游戏内输入指令）。
